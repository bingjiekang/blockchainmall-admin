import{v,r as y,e as P,i as f,o as S,k as w,g as a,w as o,X as x,M as E,Q as z,R as N,j as T,c as F,E as B,a as d,d as g,N as _,t as m,Y as h,F as c,s as D,P as L,S as I,T as M,U as V}from"./index-BiQKGgRH.js";/* empty css             *//* empty css                     *//* empty css                 *//* empty css               *//* empty css               *//* empty css              *//* empty css                  */const A={__name:"Table",props:{action:String},setup(b,{expose:l}){const i=b,u=v(),{goTop:r}=u.appContext.config.globalProperties,t=y({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10,multipleSelection:[]});P(()=>{s()});const s=()=>{t.loading=!0,f.get(i.action,{params:{pageNumber:t.currentPage,pageSize:t.pageSize}}).then(e=>{t.tableData=e.list,t.total=e.totalCount,t.currentPage=e.currPage,t.loading=!1,r&&r()})},n=e=>{t.multipleSelection=e},p=e=>{t.currentPage=e,s()};return l({state:t,getList:s}),(e,j)=>{const k=z,C=N;return S(),w(E,null,[a(k,{load:t.loading,data:t.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:n},{default:o(()=>[x(e.$slots,"column")]),_:3},8,["load","data"]),a(C,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:p},null,8,["total","page-size","current-page"])],64)}}},$={class:"header"},J={__name:"Guest",setup(b){let l=T(null);const i=()=>{if(!l.value.state.multipleSelection.length){c.error("请选择项");return}f.put("/users/0",{ids:l.value.state.multipleSelection.map(r=>r.userId)}).then(()=>{c.success("解除成功"),l.value.getList()})},u=()=>{if(!l.value.state.multipleSelection.length){c.error("请选择项");return}f.put("/users/1",{ids:l.value.state.multipleSelection.map(r=>r.userId)}).then(()=>{c.success("禁用成功"),l.value.getList()})};return(r,t)=>{const s=D,n=L,p=B;return S(),F(p,{class:"guest-container"},{header:o(()=>[d("div",$,[a(s,{type:"primary",icon:_(I),onClick:i},{default:o(()=>[g("解除禁用")]),_:1},8,["icon"]),a(s,{type:"danger",icon:_(M),onClick:u},{default:o(()=>[g("禁用账户")]),_:1},8,["icon"])])]),default:o(()=>[a(A,{action:"/users",ref_key:"table",ref:l},{column:o(()=>[a(n,{type:"selection",width:"55"}),a(n,{prop:"nickName",label:"昵称"}),a(n,{prop:"loginName",label:"登录名"}),a(n,{label:"身份状态"},{default:o(e=>[d("span",{style:h(e.row.lockedFlag==0?"color: green;":"color: red;")},m(e.row.lockedFlag==0?"正常":"禁用"),5)]),_:1}),a(n,{label:"是否注销"},{default:o(e=>[d("span",{style:h(e.row.lockedFlag==0?"color: green;":"color: red;")},m(e.row.isDeleted==0?"正常":"注销"),5)]),_:1}),a(n,{prop:"createdAt",label:"注册时间"},{default:o(e=>[g(m(_(V)(e.row.createdAt)),1)]),_:1})]),_:1},512)]),_:1})}}};export{J as default};
