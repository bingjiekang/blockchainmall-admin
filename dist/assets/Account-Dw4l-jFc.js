import{j as _,r as N,e as V,i as m,k as b,g as a,w as s,M as h,E as x,o as E,d as f,F as g,h as U,q as y,s as v,m as q}from"./index-BiQKGgRH.js";/* empty css             *//* empty css                  *//* empty css               *//* empty css              */import{m as F}from"./md5-DI6WxMmv.js";import"./_commonjsHelpers-BosuxZz1.js";const T={__name:"Account",setup(C){const u=_(null),d=_(null),e=N({user:null,nameForm:{nickName:""},passForm:{oldpass:"",newpass:""},rules:{nickName:[{required:"true",message:"昵称不能为空",trigger:["change"]}],oldpass:[{required:"true",message:"原密码不能为空",trigger:["change"]}],newpass:[{required:"true",message:"新密码不能为空",trigger:["change"]}]}});V(()=>{m.get("/adminUser/profile").then(o=>{e.user=o,e.nameForm.loginName=o.loginUserName,e.nameForm.nickName=o.nickName})});const w=()=>{u.value.validate(o=>{o&&m.put("/adminUser/name",{loginUserName:e.nameForm.loginName,nickName:e.nameForm.nickName}).then(()=>{g.success("修改成功"),window.location.reload()})})},k=()=>{d.value.validate(o=>{o&&m.put("/adminUser/password",{originalPassword:F(e.passForm.oldpass),newPassword:F(e.passForm.newpass)}).then(()=>{g.success("修改成功"),window.location.reload()})})};return(o,l)=>{const r=U,n=y,i=v,p=q,c=x;return E(),b(h,null,[a(c,{class:"account-container"},{default:s(()=>[a(p,{model:e.nameForm,rules:e.rules,ref_key:"nameRef",ref:u,"label-width":"80px","label-position":"right",class:"demo-ruleForm"},{default:s(()=>[a(n,{label:"昵称：",prop:"nickName"},{default:s(()=>[a(r,{style:{width:"200px"},modelValue:e.nameForm.nickName,"onUpdate:modelValue":l[0]||(l[0]=t=>e.nameForm.nickName=t)},null,8,["modelValue"])]),_:1}),a(n,null,{default:s(()=>[a(i,{type:"danger",onClick:w},{default:s(()=>[f("确认修改")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),a(c,{class:"account-container"},{default:s(()=>[a(p,{model:e.passForm,rules:e.rules,ref_key:"passRef",ref:d,"label-width":"80px","label-position":"right",class:"demo-ruleForm"},{default:s(()=>[a(n,{label:"原密码：",prop:"oldpass"},{default:s(()=>[a(r,{style:{width:"200px"},modelValue:e.passForm.oldpass,"onUpdate:modelValue":l[1]||(l[1]=t=>e.passForm.oldpass=t)},null,8,["modelValue"])]),_:1}),a(n,{label:"新密码：",prop:"newpass"},{default:s(()=>[a(r,{style:{width:"200px"},modelValue:e.passForm.newpass,"onUpdate:modelValue":l[2]||(l[2]=t=>e.passForm.newpass=t)},null,8,["modelValue"])]),_:1}),a(n,null,{default:s(()=>[a(i,{type:"danger",onClick:k},{default:s(()=>[f("确认修改")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})],64)}}};export{T as default};
