import{o as z,E as i,j as N,r as T,q as $,p as D,u as G}from"../element-plus/element-plus.DXxe7Acq.js";import{_ as V}from"../../assets/index-DIF_1HvL.js";import{u as M,t as q}from"../@element-plus/@element-plus.vzwj9fNK.js";import{u as R}from"../vue-router/vue-router.CTtvUmZ9.js";import{a as d}from"../axios/axios.Bo0ATomq.js";import{g as j,J as A,b as J,S as L,R as l,o as s,a as f,O as o,V as b,u as C,c as r}from"../@vue/@vue.Cyfx47te.js";import"../lodash-es/lodash-es.BM2zjOfE.js";import"../async-validator/async-validator.DKvM95Vc.js";import"../@vueuse/@vueuse.CI58GgG-.js";import"../@ctrl/@ctrl.r5W6hzzQ.js";import"../@popperjs/@popperjs.D9SI2xQl.js";import"../normalize-wheel-es/normalize-wheel-es.B6fDCfyv.js";const O={class:"header"},F=["src"],H={key:0,style:{color:"green"}},K={key:1,style:{color:"red"}},Q=["onClick"],U=["onClick"],W=["onClick"],X={__name:"Good",setup(Y){const k=j(),{goTop:p}=k.appContext.config.globalProperties,u=R(),e=A({loading:!1,tableData:[],multipleSelection:[],total:0,currentPage:1,pageSize:10});J(()=>{c()});const c=()=>{e.loading=!0,d.get("/goods/list",{params:{pageNumber:e.currentPage,pageSize:e.pageSize}}).then(t=>{e.tableData=t.list,e.total=t.totalCount,e.currentPage=t.currPage,e.loading=!1,p&&p()})},y=()=>{u.push({path:"/add"})},x=t=>{u.push({path:"/add",query:{id:t}})},S=t=>{e.currentPage=t,c()},g=(t,_)=>{d.put(`/goods/status/${_}`,{ids:t?[t]:[]}).then(()=>{i.success("修改成功"),c()})},w=t=>{e.multipleSelection=t},I=()=>{if(!e.multipleSelection.length){i.error("请选择项");return}d.delete("/deleteMallGoodsInfo",{data:{ids:e.multipleSelection.map(t=>t.goodsId)}}).then(()=>{i.success("删除成功"),c()})};return(t,_)=>{const m=N,P=T,a=$,E=D,v=G,B=z;return s(),L(B,{class:"good-container"},{header:l(()=>[f("div",O,[o(m,{type:"primary",icon:C(M),onClick:y},{default:l(()=>[b("新增商品")]),_:1},8,["icon"]),o(P,{title:"确定删除吗？",confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:I},{reference:l(()=>[o(m,{type:"danger",icon:C(q)},{default:l(()=>[b("批量删除")]),_:1},8,["icon"])]),_:1})])]),default:l(()=>[o(E,{load:e.loading,data:e.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:w},{default:l(()=>[o(a,{type:"selection",width:"55"}),o(a,{prop:"goodsId",label:"商品编号"}),o(a,{prop:"goodsName",label:"商品名"}),o(a,{prop:"goodsIntro",label:"商品简介"}),o(a,{label:"商品图片",width:"150px"},{default:l(n=>[(s(),r("img",{style:{width:"100px",height:"100px"},key:n.row.goodsId,src:t.$filters.prefix(n.row.goodsCoverImg),alt:"商品主图"},null,8,F))]),_:1}),o(a,{prop:"stockNum",label:"商品库存"}),o(a,{prop:"sellingPrice",label:"商品售价"}),o(a,{label:"上架状态"},{default:l(n=>[n.row.goodsSellStatus==0?(s(),r("span",H,"销售中")):(s(),r("span",K,"已下架"))]),_:1}),o(a,{label:"操作",width:"100"},{default:l(n=>[f("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:h=>x(n.row.goodsId)},"修改",8,Q),n.row.goodsSellStatus==0?(s(),r("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:h=>g(n.row.goodsId,1)},"下架",8,U)):(s(),r("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:h=>g(n.row.goodsId,0)},"上架",8,W))]),_:1})]),_:1},8,["load","data"]),o(v,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:S},null,8,["total","page-size","current-page"])]),_:1})}}},pe=V(X,[["__scopeId","data-v-75c780a3"]]);export{pe as default};
