import{p as y,u as v,o as P,E as c,j as w,q as x}from"../element-plus/element-plus.DXxe7Acq.js";import{t as E}from"../../assets/index-DIF_1HvL.js";import{a as f}from"../axios/axios.Bo0ATomq.js";import{g as z,J as F,b as N,o as S,c as T,O as a,R as l,F as B,P as D,r as L,S as V,a as g,V as d,u as m,W as _,U as h}from"../@vue/@vue.Cyfx47te.js";import{u as I,t as A}from"../@element-plus/@element-plus.vzwj9fNK.js";import"../lodash-es/lodash-es.BM2zjOfE.js";import"../async-validator/async-validator.DKvM95Vc.js";import"../@vueuse/@vueuse.CI58GgG-.js";import"../@ctrl/@ctrl.r5W6hzzQ.js";import"../@popperjs/@popperjs.D9SI2xQl.js";import"../normalize-wheel-es/normalize-wheel-es.B6fDCfyv.js";import"../vue-router/vue-router.CTtvUmZ9.js";const M={__name:"Table",props:{action:String},setup(b,{expose:o}){const i=b,p=z(),{goTop:r}=p.appContext.config.globalProperties,t=F({loading:!1,tableData:[],total:0,currentPage:1,pageSize:10,multipleSelection:[]});N(()=>{s()});const s=()=>{t.loading=!0,f.get(i.action,{params:{pageNumber:t.currentPage,pageSize:t.pageSize}}).then(e=>{t.tableData=e.list,t.total=e.totalCount,t.currentPage=e.currPage,t.loading=!1,r&&r()})},n=e=>{t.multipleSelection=e},u=e=>{t.currentPage=e,s()};return o({state:t,getList:s}),(e,j)=>{const k=y,C=v;return S(),T(D,null,[a(k,{load:t.loading,data:t.tableData,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:n},{default:l(()=>[B(e.$slots,"column")]),_:3},8,["load","data"]),a(C,{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize,"current-page":t.currentPage,onCurrentChange:u},null,8,["total","page-size","current-page"])],64)}}},$={class:"header"},Z={__name:"Guest",setup(b){let o=L(null);const i=()=>{if(!o.value.state.multipleSelection.length){c.error("请选择项");return}f.put("/users/0",{ids:o.value.state.multipleSelection.map(r=>r.userId)}).then(()=>{c.success("解除成功"),o.value.getList()})},p=()=>{if(!o.value.state.multipleSelection.length){c.error("请选择项");return}f.put("/users/1",{ids:o.value.state.multipleSelection.map(r=>r.userId)}).then(()=>{c.success("禁用成功"),o.value.getList()})};return(r,t)=>{const s=w,n=x,u=P;return S(),V(u,{class:"guest-container"},{header:l(()=>[g("div",$,[a(s,{type:"primary",icon:m(I),onClick:i},{default:l(()=>[d("解除禁用")]),_:1},8,["icon"]),a(s,{type:"danger",icon:m(A),onClick:p},{default:l(()=>[d("禁用账户")]),_:1},8,["icon"])])]),default:l(()=>[a(M,{action:"/users",ref_key:"table",ref:o},{column:l(()=>[a(n,{type:"selection",width:"55"}),a(n,{prop:"nickName",label:"昵称"}),a(n,{prop:"loginName",label:"登录名"}),a(n,{label:"身份状态"},{default:l(e=>[g("span",{style:h(e.row.lockedFlag==0?"color: green;":"color: red;")},_(e.row.lockedFlag==0?"正常":"禁用"),5)]),_:1}),a(n,{label:"是否注销"},{default:l(e=>[g("span",{style:h(e.row.lockedFlag==0?"color: green;":"color: red;")},_(e.row.isDeleted==0?"正常":"注销"),5)]),_:1}),a(n,{prop:"createdAt",label:"注册时间"},{default:l(e=>[d(_(m(E)(e.row.createdAt)),1)]),_:1})]),_:1},512)]),_:1})}}};export{Z as default};
