import{o as N,E as f,n as V,l as b,j as x,k as h}from"../element-plus/element-plus.DXxe7Acq.js";import"../../assets/index-DIF_1HvL.js";import{m as _}from"../js-md5/js-md5.DIAEDQd6.js";import{a as m}from"../axios/axios.Bo0ATomq.js";import{r as g,J as E,b as U,c as y,O as a,R as o,P as v,o as R,V as F}from"../@vue/@vue.Cyfx47te.js";import"../lodash-es/lodash-es.BM2zjOfE.js";import"../async-validator/async-validator.DKvM95Vc.js";import"../@vueuse/@vueuse.CI58GgG-.js";import"../@element-plus/@element-plus.vzwj9fNK.js";import"../@ctrl/@ctrl.r5W6hzzQ.js";import"../@popperjs/@popperjs.D9SI2xQl.js";import"../normalize-wheel-es/normalize-wheel-es.B6fDCfyv.js";import"../vue-router/vue-router.CTtvUmZ9.js";import"../clipboard/clipboard.DnI0MzOy.js";const K={__name:"Account",setup(C){const i=g(null),p=g(null),e=E({user:null,nameForm:{nickName:""},passForm:{oldpass:"",newpass:""},rules:{nickName:[{required:"true",message:"昵称不能为空",trigger:["change"]}],oldpass:[{required:"true",message:"原密码不能为空",trigger:["change"]}],newpass:[{required:"true",message:"新密码不能为空",trigger:["change"]}]}});U(()=>{m.get("/adminUser/profile").then(s=>{e.user=s,e.nameForm.loginName=s.loginUserName,e.nameForm.nickName=s.nickName})});const w=()=>{i.value.validate(s=>{s&&m.put("/adminUser/name",{loginUserName:e.nameForm.loginName,nickName:e.nameForm.nickName}).then(()=>{f.success("修改成功"),window.location.reload()})})},k=()=>{p.value.validate(s=>{s&&m.put("/adminUser/password",{originalPassword:_(e.passForm.oldpass),newPassword:_(e.passForm.newpass)}).then(()=>{f.success("修改成功"),window.location.reload()})})};return(s,l)=>{const r=V,t=b,u=x,d=h,c=N;return R(),y(v,null,[a(c,{class:"account-container"},{default:o(()=>[a(d,{model:e.nameForm,rules:e.rules,ref_key:"nameRef",ref:i,"label-width":"80px","label-position":"right",class:"demo-ruleForm"},{default:o(()=>[a(t,{label:"昵称：",prop:"nickName"},{default:o(()=>[a(r,{style:{width:"200px"},modelValue:e.nameForm.nickName,"onUpdate:modelValue":l[0]||(l[0]=n=>e.nameForm.nickName=n)},null,8,["modelValue"])]),_:1}),a(t,null,{default:o(()=>[a(u,{type:"danger",onClick:w},{default:o(()=>[F("确认修改")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),a(c,{class:"account-container"},{default:o(()=>[a(d,{model:e.passForm,rules:e.rules,ref_key:"passRef",ref:p,"label-width":"80px","label-position":"right",class:"demo-ruleForm"},{default:o(()=>[a(t,{label:"原密码：",prop:"oldpass"},{default:o(()=>[a(r,{style:{width:"200px"},modelValue:e.passForm.oldpass,"onUpdate:modelValue":l[1]||(l[1]=n=>e.passForm.oldpass=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"新密码：",prop:"newpass"},{default:o(()=>[a(r,{style:{width:"200px"},modelValue:e.passForm.newpass,"onUpdate:modelValue":l[2]||(l[2]=n=>e.passForm.newpass=n)},null,8,["modelValue"])]),_:1}),a(t,null,{default:o(()=>[a(u,{type:"danger",onClick:k},{default:o(()=>[F("确认修改")]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})],64)}}};export{K as default};
